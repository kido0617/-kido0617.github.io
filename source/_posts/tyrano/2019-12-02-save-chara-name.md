title: キャラ名を変数に保存するプラグイン
date: 2019-12-02
category: ティラノスクリプト
---

## はじめに

```
#あかね
もしかして、ノベルゲームの開発に興味があるの？
```

このように`#キャラ名`で会話で表示するキャラを設定しますが、ここで設定したキャラ名を変数として扱いたいという要望がありました。  
ここのキャラ名を変数で扱えれば、その後の画像表示などを共通処理ですっきりできるというニーズです。  

`ティラノスクリプト バージョン475c`で動作を確認しています。


## プラグインダウンロードと設置

ダウンロードは[こちら](https://github.com/kido0617/tyrano-plugin/archive/master.zip)  
過去作ったプラグインがいろいろ入っていますが`saveCharaName`というフォルダが今回のプラグインです。  
そのフォルダをティラノスクリプトの`data/others/plugin`フォルダ内に配置します。  

first.ksファイルの以下の箇所にプラグイン読み込みタグを追加します。

```
;ゲームで必ず必要な初期化処理はこのファイルに記述するのがオススメ
[plugin name=saveCharaName]
```

実際に使う場合はこんな感じです。変数のcharaNameに最後に呼ばれた`#キャラ名`の値が入っています。  

```
テスト-[emb exp="f.charaName"][p]
```

もし、charaNameという変数名が気に入らなかったら、プラグインのフォルダのmain.jsの6行目のcharaNameを好きに替えてください。

```js
if(pm.name) this.kag.stat.f.charaName = pm.name;
```

## ライセンス

Released under the MIT license