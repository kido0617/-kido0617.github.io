title: プレビューとランタイムでの再生が異なる問題
date: 2021-06-23
category: Spine
---


Spineのエディタ上でトラックを複数用いて、プレビューでアニメーションを確認します。  
同様にランタイム側（私の場合はUnity)でトラックを重ねて再生したところ、微妙にアニメーションが異なってしまいました。  

これは、Exportのときに`Animation clean up`を選択して不要なキーを削除していたからでした。  
トラックの重ね方があまり正しくないのだと思うのですが、以下のような状況です。  

トラック1: ボーンAを90度曲げる  
トラック2: ボーンAをデフォルトの角度に上書きする

デフォルトの角度のキーはAnimation clean up で削除されてしまうので、トラック2で上書けなかったということです。  
Animation clean upの挙動的にも正しく、私の作り方に問題があったと思います。  

ちなみにExport時でなくとも、該当のアニメーションを選択した状態でツリービューの下にあるclean upボタンを押すとどのキーが消されるかは確認できます。